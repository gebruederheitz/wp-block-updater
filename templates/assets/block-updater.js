var fe=Object.defineProperty;var ce=(e,t,n)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var q=(e,t,n)=>(ce(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function I(){}function x(e){return e()}function K(){return Object.create(null)}function X(e){e.forEach(x)}function ee(e){return typeof e=="function"}function te(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ae(e){return Object.keys(e).length===0}function c(e,t){e.appendChild(t)}function B(e,t,n){e.insertBefore(t,n||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function de(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function M(){return v(" ")}function ne(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function pe(e){return Array.from(e.childNodes)}function O(e,t){t=""+t,e.data!==t&&(e.data=t)}function U(e,t){e.value=t??""}function V(e,t,n){for(let s=0;s<e.options.length;s+=1){const l=e.options[s];if(l.__value===t){l.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function he(e){const t=e.querySelector(":checked");return t&&t.__value}let T;function L(e){T=e}function _e(){if(!T)throw new Error("Function called outside component initialization");return T}function ge(e){_e().$$.on_mount.push(e)}const A=[],D=[];let C=[];const G=[],me=Promise.resolve();let z=!1;function be(){z||(z=!0,me.then(se))}function W(e){C.push(e)}const F=new Set;let $=0;function se(){if($!==0)return;const e=T;do{try{for(;$<A.length;){const t=A[$];$++,L(t),ve(t.$$)}}catch(t){throw A.length=0,$=0,t}for(L(null),A.length=0,$=0;D.length;)D.pop()();for(let t=0;t<C.length;t+=1){const n=C[t];F.has(n)||(F.add(n),n())}C.length=0}while(A.length);for(;G.length;)G.pop()();z=!1,F.clear(),L(e)}function ve(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}function we(e){const t=[],n=[];C.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),C=t}const R=new Set;let ye;function le(e,t){e&&e.i&&(R.delete(e),e.i(t))}function Ne(e,t,n,s){if(e&&e.o){if(R.has(e))return;R.add(e),ye.c.push(()=>{R.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function H(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pe(e){e&&e.c()}function oe(e,t,n){const{fragment:s,after_update:l}=e.$$;s&&s.m(t,n),W(()=>{const o=e.$$.on_mount.map(x).filter(ee);e.$$.on_destroy?e.$$.on_destroy.push(...o):X(o),e.$$.on_mount=[]}),l.forEach(W)}function re(e,t){const n=e.$$;n.fragment!==null&&(we(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ee(e,t){e.$$.dirty[0]===-1&&(A.push(e),be(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,n,s,l,o,r,a=[-1]){const u=T;L(e);const i=e.$$={fragment:null,ctx:[],props:o,update:I,not_equal:l,bound:K(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:K(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};r&&r(i.root);let d=!1;if(i.ctx=n?n(e,t.props||{},(f,b,..._)=>{const p=_.length?_[0]:b;return i.ctx&&l(i.ctx[f],i.ctx[f]=p)&&(!i.skip_bound&&i.bound[f]&&i.bound[f](p),d&&Ee(e,f)),b}):[],i.update(),d=!0,X(i.before_update),i.fragment=s?s(i.ctx):!1,t.target){if(t.hydrate){const f=pe(t.target);i.fragment&&i.fragment.l(f),f.forEach(S)}else i.fragment&&i.fragment.c();t.intro&&le(e.$$.fragment),oe(e,t.target,t.anchor),se()}L(u)}class ie{constructor(){q(this,"$$");q(this,"$$set")}$destroy(){re(this,1),this.$destroy=I}$on(t,n){if(!ee(n))return I;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(t){this.$$set&&!ae(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ke="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ke);function Oe(e){let t,n,s;return{c(){t=w("div"),n=w("progress"),s=v(e[2]),m(n,"id","progress"),m(n,"title","Posts processed"),m(n,"max",e[1]),n.value=e[0],m(n,"class","svelte-k5v0xh"),m(t,"class","svelte-k5v0xh")},m(l,o){B(l,t,o),c(t,n),c(n,s)},p(l,[o]){o&4&&O(s,l[2]),o&2&&m(n,"max",l[1]),o&1&&(n.value=l[0])},i:I,o:I,d(l){l&&S(t)}}}function je(e,t,n){let{value:s=null}=t,{max:l=1}=t,{label:o="0%"}=t;return e.$$set=r=>{"value"in r&&n(0,s=r.value),"max"in r&&n(1,l=r.max),"label"in r&&n(2,o=r.label)},[s,l,o]}class $e extends ie{constructor(t){super(),ue(this,t,je,Oe,te,{value:0,max:1,label:2})}}function J(e,t,n){const s=e.slice();return s[15]=t[n],s}function Q(e){let t,n,s,l,o,r=H(e[3]),a=[];for(let u=0;u<r.length;u+=1)a[u]=Y(J(e,r,u));return{c(){var u;t=w("select"),n=w("option"),n.textContent="Please select";for(let i=0;i<a.length;i+=1)a[i].c();n.__value="",U(n,n.__value),n.selected=!0,m(t,"name","allowed-types"),t.disabled=s=!((u=e[3])!=null&&u.length)||e[8],e[2]===void 0&&W(()=>e[12].call(t))},m(u,i){B(u,t,i),c(t,n);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(t,null);V(t,e[2],!0),l||(o=ne(t,"change",e[12]),l=!0)},p(u,i){var d;if(i&8){r=H(u[3]);let f;for(f=0;f<r.length;f+=1){const b=J(u,r,f);a[f]?a[f].p(b,i):(a[f]=Y(b),a[f].c(),a[f].m(t,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=r.length}i&264&&s!==(s=!((d=u[3])!=null&&d.length)||u[8])&&(t.disabled=s),i&12&&V(t,u[2])},d(u){u&&S(t),de(a,u),l=!1,o()}}}function Y(e){let t,n=e[15]+"",s,l;return{c(){t=w("option"),s=v(n),t.__value=l=e[15],U(t,t.__value)},m(o,r){B(o,t,r),c(t,s)},p(o,r){r&8&&n!==(n=o[15]+"")&&O(s,n),r&8&&l!==(l=o[15])&&(t.__value=l,U(t,t.__value))},d(o){o&&S(t)}}}function Z(e){let t,n,s,l,o,r,a,u,i,d,f,b,_,p,E,h,y,g,N,j;return{c(){t=w("div"),n=w("div"),s=v(e[4]),l=M(),o=w("div"),r=w("span"),a=v("Processed: "),u=v(e[1]),i=v(` /
                `),d=w("span"),f=v("Updated: "),b=v(e[6]),_=v(` /
                `),p=w("span"),E=v("Skipped: "),h=v(e[7]),y=v(` /
                `),g=w("span"),N=v("Errors: "),j=v(e[5]),m(n,"class","ghbu-status svelte-32u7id"),m(r,"class","ghbu-processed"),m(d,"class","ghbu-updated svelte-32u7id"),m(p,"class","ghbu-skipped svelte-32u7id"),m(g,"class","ghbu-errors svelte-32u7id"),m(o,"class","ghbu-status-details"),m(t,"class","ghbu-display svelte-32u7id")},m(P,k){B(P,t,k),c(t,n),c(n,s),c(t,l),c(t,o),c(o,r),c(r,a),c(r,u),c(o,i),c(o,d),c(d,f),c(d,b),c(o,_),c(o,p),c(p,E),c(p,h),c(o,y),c(o,g),c(g,N),c(g,j)},p(P,k){k&16&&O(s,P[4]),k&2&&O(u,P[1]),k&64&&O(b,P[6]),k&128&&O(h,P[7]),k&32&&O(j,P[5])},d(P){P&&S(t)}}}function Ae(e){var E;let t,n,s,l,o,r,a,u,i,d,f,b;n=new $e({props:{max:e[0],value:e[1],label:e[4]}});let _=((E=e[3])==null?void 0:E.length)&&Q(e),p=e[8]&&Z(e);return{c(){t=w("main"),Pe(n.$$.fragment),s=M(),l=w("div"),_&&_.c(),o=M(),r=w("button"),a=v("Start"),i=M(),p&&p.c(),m(r,"type","button"),m(r,"class","button button-primary"),r.disabled=u=!e[2]||e[8],m(l,"class","ghbu-controls")},m(h,y){B(h,t,y),oe(n,t,null),c(t,s),c(t,l),_&&_.m(l,null),c(l,o),c(l,r),c(r,a),c(t,i),p&&p.m(t,null),d=!0,f||(b=ne(r,"click",e[9]),f=!0)},p(h,[y]){var N;const g={};y&1&&(g.max=h[0]),y&2&&(g.value=h[1]),y&16&&(g.label=h[4]),n.$set(g),(N=h[3])!=null&&N.length?_?_.p(h,y):(_=Q(h),_.c(),_.m(l,o)):_&&(_.d(1),_=null),(!d||y&268&&u!==(u=!h[2]||h[8]))&&(r.disabled=u),h[8]?p?p.p(h,y):(p=Z(h),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},i(h){d||(le(n.$$.fragment,h),d=!0)},o(h){Ne(n.$$.fragment,h),d=!1},d(h){h&&S(t),re(n),_&&_.d(),p&&p.d(),f=!1,b()}}}function Ce(e,t,n){let{ghwpNonce:s}=t,l=1,o=null,r="",a,u,i,d=0,f=0,b=0,_=!1;async function p(){const g=await fetch("/wp-json/ghwp/v1/block-updater/types",{credentials:"same-origin",headers:{"X-WP-Nonce":s}});n(3,a=await g.json())}async function E(g){const N=await fetch(`/wp-json/ghwp/v1/block-updater/update-post?postId=${g}&block=${r}`,{credentials:"same-origin",headers:{"X-WP-Nonce":s}});if(n(1,o=o+1),!N.ok){n(5,d=d+1);return}await N.json()===!0?n(6,f=f+1):n(7,b=b+1)}async function h(){if(!r)return;n(8,_=!0);const N=await(await fetch("/wp-json/ghwp/v1/block-updater/posts",{credentials:"same-origin",headers:{"X-WP-Nonce":s}})).json();n(0,l=N.length);for(let j of N)await E(j);n(8,_=!1)}ge(async()=>{await p(),n(1,o=0)});function y(){r=he(this),n(2,r),n(3,a)}return e.$$set=g=>{"ghwpNonce"in g&&n(10,s=g.ghwpNonce)},e.$$.update=()=>{e.$$.dirty&3&&n(11,u=o/(l/100)),e.$$.dirty&2051&&n(4,i=`${Math.floor(u)}% (${o}/${l})`)},[l,o,r,a,i,d,f,b,_,h,s,u,y]}class Se extends ie{constructor(t){super(),ue(this,t,Ce,Ae,te,{ghwpNonce:10})}}new Se({target:document.getElementById("app"),props:{ghwpNonce:window.ghwpRestNonce}});
